<!--<%@ page language="java" contentType="text/html; charset=ISO-8859-1" pageEncoding="ISO-8859-1"%>-->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
	
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Speak Easy</title>
   
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
  
<link rel="stylesheet" href="./css/bootstrap.css" type="text/css">
<link rel="stylesheet" href="./css/bootstrap-responsive.min.css" type="text/css">
<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Open+Sans:400italic,600italic,400,600">
<link rel="stylesheet" href="./css/font-awesome.min.css" type="text/css">
<link rel="stylesheet" href="./css/ui-lightness/jquery-ui-1.10.0.custom.min.css">
<link rel="stylesheet" href="./css/custom.css">

<!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
<!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->


<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
<script src="http://code.responsivevoice.org/responsivevoice.js"></script>
	
<script>

	var responsiveVoiceParams = {
		volume: 1,
		rate: 1,
	};
	
	function sayText(text){
		if (responsiveVoice.isPlaying())
			responsiveVoice.cancel();

		var voice = $("#voicesDropdown").val();
		responsiveVoice.speak(text, voice, responsiveVoiceParams);
	}
	
	function addTextToHistory(text){
		var $textHistory = $("#textHistory");
		
		$textHistory.prepend($("<li><a>"+text+"</a></li>"));
		$textHistoryItems = $textHistory.children("li");
		$textHistoryItems.first()
			.click(function(e){
				sayText(text);
			});
		if ($textHistoryItems.size() > 5)
			$textHistoryItems.last().remove();
			
	}
	
	function textboxSubmit(){
		var $textInput = $("#textInput");
		var text = $textInput.val();
		$textInput.val('');
		if (text != ""){
			sayText(text);
			addTextToHistory(text);
		}
	}
	
	$(function(){
		$("#textInput").keypress(function(e){
			if(e.keyCode == 13)
				textboxSubmit();
		});
		
		$("#playButton").click(function(){
			textboxSubmit();
		});
	
// Cant do this- I have to pass in a voice to the speak command or the stupid thing cries		
//		$("#voicesDropdown").change(function(){
//			responsiveVoice.setDefaultVoice($("#voicesDropdown").val());
//		});
			
		var voiceOptions = responsiveVoice.getVoices();
		var $voicesDropdown = $("#voicesDropdown");
		for(var i = 0; i < voiceOptions.length; ++i){
			var voice = voiceOptions[i].name;
			$voicesDropdown.append($("<option />").val(voice).text(voice));
		}
	});
</script>
</head>
	
<body>

<nav class="navbar navbar-inverse" role="navigation">
	<div class="container">
		<div class="navbar-header">
			<a class="navbar-brand" href="#" style="color: #CCCCCC">Speak Easy</a>
		</div>
		<div class="nav navbar-nav navbar-right" style="margin: 7.5px 15px 7.5px 15px">
			<select id="voicesDropdown" name="voicesDropdown" class="form-control"></select>
		</div>
	</div>
</nav>

<div class="main">

	<div id="content" class="container">
		
		<div class="section col-md-4">
			<div class="input-group">
				<input id="textInput" name="textInput" type="text" class="form-control" value="Hot Tamales"/>
				<div class="input-group-btn">
					<button id="playButton" name="playButton" type="button" class="btn btn-success">Play</button>
					<button type="button" class="btn btn-success dropdown-toggle" data-toggle="dropdown" tabindex="-1">
					  &nbsp;<span class="caret"></span>&nbsp;
					</button>
					<ul id="textHistory" class="dropdown-menu pull-right" role="menu"></ul>
				</div>
			</div>
		</div>
		
		<div class="col-md-8">&nbsp;
		</div>
	</div>

</div>

<!-- Placed at the end of the document so the pages load faster -->
<script src="./js/libs/bootstrap.min.js"></script>

</body>
	
</html>